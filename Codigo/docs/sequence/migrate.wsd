@startuml migrate
skinparam sequenceMessageAlign center

actor "Administrador" as User
participant "<<Layer>>\nPresentation (CLI)" as CLI
participant "<<Layer>>\nApplication" as App
participant "<<Layer>>\nInfrastructure" as Infra
boundary "config" as ConfigFile

User -> CLI : hookci migrate
activate CLI
CLI -> App : run()
activate App
App -> Infra : load_conf()
activate Infra
Infra -> ConfigFile : read config
activate ConfigFile
ConfigFile --> Infra : old_config_data
deactivate ConfigFile
Infra --> App : old_config_data
deactivate Infra
App -> App : process_migration()

alt Migração bem-sucedida
    App -> Infra : write_conf()
    activate Infra
    Infra -> ConfigFile : write updated config
    activate ConfigFile
    ConfigFile --> Infra : success
    deactivate ConfigFile
    Infra --> App : write_success
    deactivate Infra
    App --> CLI : migration_success_message
else Migração requer atenção manual
    App --> CLI : migration_error
    deactivate App
end

CLI --> User : Exibe resultado da migração
deactivate CLI
@enduml
